<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>HomeHub | Firebase Sync</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    :root {
      --primary: hsl(250, 60%, 60%);
      --primary-light: hsl(250, 60%, 85%);
      --primary-dark: hsl(250, 60%, 40%);
      --secondary: hsl(180, 50%, 45%);
      --accent: hsl(30, 90%, 60%);
      --success: hsl(145, 50%, 50%);
      --danger: hsl(0, 70%, 60%);
      --warning: hsl(45, 90%, 60%);
      --bg-main: hsl(220, 20%, 97%);
      --bg-card: hsl(0, 0%, 100%);
      --text-main: hsl(220, 15%, 15%);
      --text-muted: hsl(220, 10%, 45%);
      --border: hsl(220, 15%, 90%);
      --glass-bg: hsla(0, 0%, 100%, 0.7);
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
      --nav-height: 70px;
      --header-height: 85px;
      --radius-md: 18px;
      --radius-lg: 30px;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top left, var(--primary-light), var(--bg-main));
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      color: var(--text-main);
    }

    .card {
      width: 100%;
      max-width: 420px;
      background: var(--glass-bg);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      backdrop-filter: blur(12px);
      padding: 24px 24px 28px;
    }

    .title {
      font-size: 1.6rem;
      font-weight: 700;
      margin-bottom: 4px;
      text-align: center;
    }

    .subtitle {
      font-size: 0.95rem;
      color: var(--text-muted);
      text-align: center;
      margin-bottom: 20px;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 8px;
    }

    label {
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    input[type="text"] {
      width: 100%;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      padding: 10px 12px;
      font-size: 1rem;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s, background-color 0.2s;
      background-color: rgba(255, 255, 255, 0.9);
    }

    input[type="text"]:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(124, 92, 255, 0.18);
      background-color: #fff;
    }

    button {
      margin-top: 10px;
      width: 100%;
      border-radius: var(--radius-md);
      border: none;
      padding: 11px 14px;
      font-size: 1rem;
      font-weight: 600;
      color: white;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: transform 0.1s, box-shadow 0.1s, filter 0.1s;
    }

    button:hover {
      filter: brightness(1.05);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 3px 6px rgba(0,0,0,0.16);
    }

    .hint {
      margin-top: 10px;
      font-size: 0.85rem;
      color: var(--text-muted);
      text-align: center;
    }

    .status {
      margin-top: 10px;
      font-size: 0.85rem;
      text-align: center;
    }

    .status.ok {
      color: var(--success);
    }

    .status.error {
      color: var(--danger);
    }
  </style>
</head>
<body>
  <div class="card">
    <h1 class="title">HomeHub</h1>
    <p class="subtitle">Organización del hogar para parejas</p>

    <form id="name-form">
      <label for="name-input">Tu nombre</label>
      <input
        id="name-input"
        name="name"
        type="text"
        placeholder="Escribí tu nombre"
        autocomplete="off"
        required
      />
      <button type="submit">Entrar</button>
    </form>

    <p class="hint">Ambos escriben el MISMO nombre para sincronizar</p>
    <p id="status" class="status"></p>
  </div>

  <!-- Firebase SDK v9 compat desde CDN (no hace falta import) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script>
    // Config de tu proyecto (la que me pasaste)
    const firebaseConfig = {
      apiKey: "AIzaSyClAMgCLDBr-vJBGkvU-HSPLKZONGvbzMA",
      authDomain: "app-pareja-ce136.firebaseapp.com",
      projectId: "app-pareja-ce136",
      storageBucket: "app-pareja-ce136.firebasestorage.app",
      messagingSenderId: "794337445821",
      appId: "1:794337445821:web:f50780956f0a02e68af4d4",
      measurementId: "G-HGN7KM71J5",
      // añadimos la URL de la Realtime Database
      databaseURL: "https://app-pareja-ce136-default-rtdb.firebaseio.com"
    };

    // Inicializar Firebase (modo compat, sin imports) [web:25][web:31]
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("name-form");
      const nameInput = document.getElementById("name-input");
      const statusEl = document.getElementById("status");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const nombre = nameInput.value.trim();

        if (!nombre) {
          statusEl.textContent = "Por favor, escribí un nombre.";
          statusEl.className = "status error";
          return;
        }

        // Guardar/actualizar una sala con ese nombre
        const roomRef = db.ref("salas/" + nombre);

        roomRef.set({
          nombre: nombre,
          actualizado: new Date().toISOString()
        })
        .then(() => {
          statusEl.textContent = "Listo, sala sincronizada para \"" + nombre + "\".";
          statusEl.className = "status ok";
        })
        .catch((error) => {
          console.error(error);
          statusEl.textContent = "Ocurrió un error al conectar con Firebase.";
          statusEl.className = "status error";
        });
      });
    });
  </script>
</body>
</html>
